import streamlit as st


def render_parameters():
    """
    Функция для отображения интерфейса настройки параметров конвертации.
    Содержит только поле для ввода порога бинаризации.
    """
    st.subheader("⚙️ Параметры конвертации")
    st.markdown("Настройте параметр для бинарного преобразования изображений.")

    # Пояснение о пороге
    st.markdown("""
    **Порог бинаризации (0-255)** - значение яркости, которое определяет границу между черным и белым цветом:
    - Пиксели ярче порога становятся **белыми**
    - Пиксели темнее порога становятся **черными**

    Рекомендуемые значения:
    - Для документов: 120-150
    - Для схем и чертежей: 80-100  
    - Для фотографий с текстом: 180-200
    """)

    # Инициализация параметра в session_state, если его нет
    if "threshold" not in st.session_state:
        st.session_state["threshold"] = 128

    # Поле для ввода порога
    threshold_input = st.number_input(
        "Введите значение порога (0-255)",
        min_value=0,
        max_value=255,
        value=st.session_state["threshold"],
        step=1,
        help="Значение от 0 до 255 для разделения черного и белого цветов"
    )

    # Обновление состояния
    st.session_state["threshold"] = threshold_input

    # Подтверждение сохранения
    st.success(f"Порог установлен: {threshold_input}")

    # Текущее значение для отладки
    with st.expander("Текущее значение в системе"):
        st.write(f"threshold = {st.session_state['threshold']}")